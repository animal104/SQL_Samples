/*
Mickey Saine
DBMS 130 - M08 MIDTERM PROJECT
3/10/2021
SaineMichael_Midterm.sql
THE CREATION OF AN ENTIERLY NEW DATABASE THAT STILL DOESN'T INVOLVE JEDI!
*/

-- Creates the Tables that are required
CREATE TABLE CUSTOMERS
(
CUSTOMER_ID NUMBER (10) NOT NULL ,
LAST_NAME VARCHAR2 (25) NOT NULL ,
FIRST_NAME VARCHAR2 (25) NOT NULL ,
HOME_PHONE VARCHAR2 (12) NOT NULL ,
ADDRESS VARCHAR2 (100) NOT NULL ,
CITY VARCHAR2 (30) NOT NULL ,
STATE VARCHAR2 (2) NOT NULL ,
EMAIL VARCHAR2 (25) ,
CELL_PHONE VARCHAR2 (12)
) ;

CREATE TABLE MOVIES
(
TITLE_ID NUMBER (10) NOT NULL ,
TITLE VARCHAR2 (60) NOT NULL ,
DESCRIPTION VARCHAR2 (400) NOT NULL ,
RATING VARCHAR2 (4) ,
CATEGORY VARCHAR2 (20) ,
RELEASE_DATE DATE NOT NULL 
) ;

CREATE TABLE MEDIA
(
MEDIA_ID NUMBER (10) NOT NULL ,
FORMAT VARCHAR2 (3) NOT NULL ,
TITLE_ID NUMBER (10) NOT NULL 
) ;

CREATE TABLE RENTAL_HISTORY
(
MEDIA_ID NUMBER (10) NOT NULL ,
RENTAL_DATE DATE NOT NULL ,
CUSTOMER_ID NUMBER (10) NOT NULL ,
RETURN_DATE DATE 
) ;

CREATE TABLE ACTORS
(
ACTOR_ID NUMBER (10) NOT NULL ,
STAGE_NAME VARCHAR2 (40) NOT NULL ,
FIRST_NAME VARCHAR2 (25) NOT NULL ,
LAST_NAME VARCHAR2 (25) NOT NULL ,
BIRTH_DATE DATE NOT NULL
) ;

CREATE TABLE STAR_BILLINGS
(
ACTOR_ID NUMBER (10) NOT NULL ,
TITLE_ID NUMBER (10) NOT NULL ,
COMMENTS VARCHAR2 (40) NOT NULL ,
) ;

-- ADDING PRIMARY KEYS TO EACH TABLE
ALTER TABLE CUSTOMERS ADD CONSTRAINT CUSTOMER_PK PRIMARY KEY ( CUSTOMER_ID ) ;
ALTER TABLE MOVIES ADD CONSTRAINT MOVIES_PK PRIMARY KEY ( TITLE_ID ) ;
ALTER TABLE MEDIA ADD CONSTRAINT MEDIA_PK PRIMARY KEY ( CUSTOMER_ID ) ;
ALTER TABLE RENTAL_HISTORY ADD CONSTRAINT RENTAL_HISTORY_PK PRIMARY KEY ( MEDIA_ID, RENTAL_DATE )  ;
ALTER TABLE ACTORS ADD CONSTRAINT ACTOR_PK PRIMARY KEY ( ACTOR_ID ) ;
ALTER TABLE STAR_BILLINGS ADD CONSTRAINT STAR_BILLINGS_PK PRIMARY KEY ( CUSTOMER_ID ) ;


-- ADDING FOREIGN KEYS TO EACH TABLE
ALTER TABLE MEDIA ADD CONSTRAINT MEDIA_FK FOREIGN KEY ( TITLE_ID ) REFERENCES MOVIES ( TITLE_ID ) ;
ALTER TABLE RENTAL_HISTORY ADD CONSTRAINT MEDIA_ID_HISTORY_FK FOREIGN KEY ( MEDIA_ID ) REFERENCES MEDIA ( MEDIA_ID ) ;
ALTER TABLE RENTAL_HISTORY ADD CONSTRAINT CUSTOMER_ID_FK FOREIGN KEY ( MEDIA_ID ) REFERENCES CUSTOMERS ( CUSTOMER_ID ) ;

-- ALTERING THE RENTAL_DATE TABLE FOR DEFAULT DATES
ALTER TABLE RENTAL_DATE MODIFY (RENTAL_DATE DATE DEFAULT SYSDATE);

-- ALTERING APPROPRIATE TABLES FOR UNIQUE KEYS
ALTER TABLE CUSTOMERS ADD (CUSTOMER_ID NUMBER (10) UNIQUE );
ALTER TABLE MOVIES ADD (TITLE_ID NUMBER (10) UNIQUE );
ALTER TABLE MEDIA ADD (MEDIA_ID NUMBER (10) UNIQUE );
ALTER TABLE RENTAL_HISTORY ADD (MEDIA_ID NUMBER (10) UNIQUE );
ALTER TABLE ACTORS ADD (ACTOR_ID NUMBER (10) UNIQUE );


-- INSERTING ROWS IN THE CUSTOMERS TABLE
INSERT INTO CUSTOMERS VALUES (101, 'PALOMBO', 'LISA', '710-270-2669', '123 MAIN ST.', 'BUFFALO', 'NY', 'PALBOMBO@ECC.EDU', 716-555-1212);
INSERT INTO CUSTOMERS VALUES (102, 'KIRK', 'JAMES', '710-270-2669', '1701 ENTERPRISE', 'MONTREAL', 'QB', 'JAMES.KIRK@STARFLEET.MIL', 716-555-1213);
INSERT INTO CUSTOMERS VALUES (103, 'SPOCK', 'MISTER', '710-270-2669', '1701 ENTERPRISE', 'WEST END', 'MA', 'SPOCK@STARFLEET.MIL', 716-555-1214);
INSERT INTO CUSTOMERS VALUES (104, 'MCCOY', 'LEONARD', '710-270-2669', '1701 ENTERPRISE', 'TOCCOA', 'GA', 'LEONARD.MCCOY@STARFLEET.MIL', 716-555-1215);
INSERT INTO CUSTOMERS VALUES (105, 'SCOTT', 'MONTGOMERY', '710-270-2669', '1701 ENTERPRISE ', 'VANCOUVER', 'BC', 'MONTGOMERY.SCOTT@STARFLEET.MIL', 716-555-1216);
INSERT INTO CUSTOMERS VALUES (106, 'NYOTA', 'UHURA', '710-270-2669', '1701 ENTERPRISE ', 'ROBBINS', 'IL', 'NYOTA.UHURA@STARFLEET.MIL', 716-555-1217);
INSERT INTO CUSTOMERS VALUES (106, 'KIKARU', 'SULU', '710-270-2669', '1701 ENTERPRISE ', 'LOS ANGELES', 'CA', 'KIKARU.SULU@STARFLEET.MIL', 716-555-1217);

-- INSERTING ROWS IN THE MOVIES TABLE
INSERT INTO MOVIES VALUES (1, 'Remember the Titans', 'The true story of a newly appointed African-American coach and his high school team on their first season as a racially integrated unit.', 'PG', 'DRAMA', TO_DATE('29-Sep-2000','DD-Mon-YYYY'));
INSERT INTO MOVIES VALUES (2, 'V for Vendetta', 'In a future British tyranny, a shadowy freedom fighter, known only by the alias of "V", plots to overthrow it with the help of a young woman.', 'R', 'ACTION', TO_DATE('17-Mar-2005','DD-Mon-YYYY'));
INSERT INTO MOVIES VALUES (3, '1984', 'In a totalitarian future society, a man, whose daily work is re-writing history, tries to rebel by falling in love.', 'R', 'DRAMA', TO_DATE('22-Mar-1984','DD-Mon-YYYY'));
INSERT INTO MOVIES VALUES (4, 'Robot Carnival', 'A collection of short stories, made by different animators with "robot" as the working title.', 'NA', 'SCIFI', TO_DATE('21-Jul-1987','DD-Mon-YYYY'));
INSERT INTO MOVIES VALUES (5, 'Tron', 'A computer hacker is abducted into the digital world and forced to participate in gladiatorial games where his only chance of escape is with the help of a heroic security program.', 'PG', 'ACTION', TO_DATE('09-Jul-1982','DD-Mon-YYYY'));
INSERT INTO MOVIES VALUES (6, 'WARGAMES', 'A young man finds a back door into a military central computer in which reality is confused with game-playing, possibly starting World War III.', 'PG', 'ACTION', TO_DATE('03-Jun-1983','DD-Mon-YYYY'));
INSERT INTO MOVIES VALUES (7, 'Star Wars: Episode IV', 'Luke Skywalker joins forces with a Jedi Knight, a cocky pilot, a Wookiee and two droids to save the galaxy from the Empire\'s world-destroying battle station, while also attempting to rescue Princess Leia from the mysterious Darth Vader.', 'PG', 'ACTION', TO_DATE('25-May-1977','DD-Mon-YYYY'));

-- INSERTING ROWS IN THE MEDIA TABLE
INSERT INTO MEDIA VALUES (92, 'DVD', 1);
INSERT INTO MEDIA VALUES (93, 'VHS', 1);
INSERT INTO MEDIA VALUES (94, 'DVD', 2);
INSERT INTO MEDIA VALUES (95, 'VHS', 2);
INSERT INTO MEDIA VALUES (96, 'DVD', 3);
INSERT INTO MEDIA VALUES (97, 'VHS', 3);
INSERT INTO MEDIA VALUES (98, 'DVD', 4);
INSERT INTO MEDIA VALUES (99, 'VHS', 4);
INSERT INTO MEDIA VALUES (100, 'DVD', 5);
INSERT INTO MEDIA VALUES (101, 'BET', 5);
INSERT INTO MEDIA VALUES (102, 'DVD', 6);
INSERT INTO MEDIA VALUES (103, 'BET', 6);
INSERT INTO MEDIA VALUES (104, 'DVD', 7);
INSERT INTO MEDIA VALUES (105, 'BLR', 7);

-- INSERTING ROWS IN THE RENTAL_HISTORY TABLE
INSERT INTO RENTAL_HISTORY VALUES (92, TO_DATE('19-Sep-2010','DD-Mon-YYYY'), 101, TO_DATE('20-Sep-2010','DD-Mon-YYYY'));
INSERT INTO RENTAL_HISTORY VALUES (94, TO_DATE('19-Sep-2010','DD-Mon-YYYY'), 103, TO_DATE('20-Sep-2010','DD-Mon-YYYY'));
INSERT INTO RENTAL_HISTORY VALUES (94, TO_DATE('20-Sep-2010','DD-Mon-YYYY'), 105, TO_DATE('21-Sep-2010','DD-Mon-YYYY'));
INSERT INTO RENTAL_HISTORY VALUES (104, TO_DATE('19-Sep-2010','DD-Mon-YYYY'), 106, TO_DATE('20-Sep-2010','DD-Mon-YYYY'));
INSERT INTO RENTAL_HISTORY VALUES (105, TO_DATE('24-Sep-2010','DD-Mon-YYYY'), 102, TO_DATE('25-Sep-2010','DD-Mon-YYYY'));

-- INSERTING ROWS IN THE ACTORS TABLE
INSERT INTO ACTORS VALUES (1001, 'Brad Pitt', 'William', 'Pitt', TO_DATE('18-Dec-1963','DD-Mon-YYYY'));
INSERT INTO ACTORS VALUES (1002, 'Hedy Lamarr', 'Hedy', 'Lamarr', TO_DATE('09-Nov-1914','DD-Mon-YYYY'));
INSERT INTO ACTORS VALUES (1003, 'Zachary Quinto', 'Zachary', 'Quinto', TO_DATE('02-Jun-1977','DD-Mon-YYYY'));
INSERT INTO ACTORS VALUES (1004, 'Jeff Bridges', 'Jeffery', 'Bridges', TO_DATE('04-Dec-1949','DD-Mon-YYYY'));
INSERT INTO ACTORS VALUES (1005, 'Frank Oz', 'Frank', 'Oz', TO_DATE('25-May-1944','DD-Mon-YYYY'));

-- INSERTING ROWS IN THE STAR_BILLINGS TABLE
INSERT INTO STAR_BILLINGS VALUES (1001, 2, 'Romantic Lead');
INSERT INTO STAR_BILLINGS VALUES (1002, 7, 'Brillant Starlett');
INSERT INTO STAR_BILLINGS VALUES (1003, 9, 'First Officer');
INSERT INTO STAR_BILLINGS VALUES (1004, 5, 'HEADLINER');
INSERT INTO STAR_BILLINGS VALUES (1005, 8, 'ADORABLE MUPPET');
































